(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6856:function(e,t,l){Promise.resolve().then(l.bind(l,6774))},6774:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return n}});var a=l(7437),o=l(8059),i=l.n(o),r=l(2265);function n(){let[e,t]=(0,r.useState)(1),[l,o]=(0,r.useState)(1280),[n,s]=(0,r.useState)(720),[c,f]=(0,r.useState)(""),[h,g]=(0,r.useState)(["data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#ff6b6b"/><text x="20" y="48" font-size="20" fill="#fff">Test 1</text></svg>'),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#4ecdc4"/><text x="20" y="48" font-size="20" fill="#fff">Test 2</text></svg>'),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#45b7d1"/><text x="20" y="48" font-size="20" fill="#fff">Test 3</text></svg>'),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#96ceb4"/><text x="20" y="48" font-size="20" fill="#fff">Test 4</text></svg>'),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#feca57"/><text x="20" y="48" font-size="20" fill="#fff">Test 5</text></svg>'),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#ff9ff3"/><text x="20" y="48" font-size="20" fill="#fff">Test 6</text></svg>'),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#54a0ff"/><text x="20" y="48" font-size="20" fill="#fff">Test 7</text></svg>'),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><rect width="512" height="512" fill="#5f27cd"/><text x="20" y="48" font-size="20" fill="#fff">Test 8</text></svg>')]),[d,u]=(0,r.useState)(null),[b,m]=(0,r.useState)(!1),[w,p]=(0,r.useState)(null),x=(0,r.useRef)(null),[v,y]=(0,r.useState)(()=>{let e={prompt:{l:60,t:180,w:350,h:270},vecBtn:{l:510,t:325,w:280,h:105},pngBtn:{l:510,t:490,w:280,h:105},hist:{l:935,t:192,w:320,h:398}};try{let t=localStorage.getItem("ui_rects");if(t)return{...e,...JSON.parse(t)}}catch(e){}return e});function S(e){t(window.innerWidth/e)}(0,r.useEffect)(()=>{function e(){S(l)}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l]);let k=l/1280,P=n/720,M=e=>({left:e.l*k,top:e.t*P,width:e.w*k,height:e.h*P}),j=(e,t)=>{b&&(e.preventDefault(),p({key:t,dx:e.clientX,dy:e.clientY}))},R=async(e,t)=>{console.log("AI Image Generation - Prompt:",e,"Type:",t);try{console.log("\uD83D\uDD04 Calling backend API...");let t=await fetch("http://localhost:5000/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,style:"cartoon",quality:"balanced",width:512,height:512})});if(console.log("\uD83D\uDCE1 API Response status:",t.status),!t.ok)throw Error("HTTP error! status: ".concat(t.status));let l=await t.json();if(l.success&&l.image)return console.log("✅ AI Generated image from backend:",l.image.length),l.image;throw Error("No image generated")}catch(o){console.error("❌ Backend API error:",o),console.log("\uD83D\uDD04 Using fallback local generation...");let l=document.createElement("canvas");l.width=512,l.height=512;let a=l.getContext("2d");return a.clearRect(0,0,512,512),I(a,e,t),l.toDataURL("image/png")}},I=(e,t,l)=>{let a=t.toLowerCase(),o=a.includes("realistic")||a.includes("photo")||a.includes("photograph"),i=a.includes("cartoon")||a.includes("anime")||a.includes("manga"),r=a.includes("abstract")||a.includes("artistic")||a.includes("creative"),n=a.includes("minimal")||a.includes("simple")||a.includes("clean"),s=C(t),c=s.primary,f=s.secondary,h=s.accent,g=T(t);"png"===l?N(e,t,g,c,f,h,o,i,r,n):z(e,t,g,c,f,h,n)},C=e=>{let t=e.toLowerCase(),l=[];for(let[e,a]of Object.entries({red:"#ff4757",blue:"#3742fa",green:"#2ed573",yellow:"#ffa502",purple:"#5f27cd",orange:"#ff6348",pink:"#ff3838",brown:"#8b4513",black:"#2c2c54",white:"#f8f9fa",gray:"#57606f",cyan:"#0abde3",magenta:"#ff6b6b",lime:"#32ff7e",indigo:"#4834d4",violet:"#9c88ff"}))t.includes(e)&&l.push(a);return{primary:l[0]||"#4ecdc4",secondary:l[1]||"#ff6b6b",accent:l[2]||"#feca57"}},T=e=>{let t=e.toLowerCase(),l=[];for(let[e,a]of Object.entries({house:["house","home","building","casa","casa"],car:["car","vehicle","auto","carro"],tree:["tree","plant","forest","\xe1rvore"],person:["person","people","man","woman","child","pessoa"],animal:["cat","dog","bird","fish","animal","gato","cachorro"],nature:["mountain","ocean","sky","cloud","sun","moon","montanha"],food:["food","fruit","apple","banana","comida"],abstract:["abstract","pattern","design","art","arte"]}))a.some(e=>t.includes(e))&&l.push(e);return l.length>0?l:["abstract"]},N=(e,t,l,a,o,i,r,n,s,c)=>{if(s){let t=e.createRadialGradient(256,256,0,256,256,300);t.addColorStop(0,a+"40"),t.addColorStop(.5,o+"20"),t.addColorStop(1,i+"10"),e.fillStyle=t,e.fillRect(0,0,512,512)}else{let t=e.createLinearGradient(0,0,512,512);t.addColorStop(0,a+"30"),t.addColorStop(1,o+"20"),e.fillStyle=t,e.fillRect(0,0,512,512)}l.forEach((t,l)=>{D(e,t,a,o,i,l,r,n,s)}),J(e,t,a,o,i,r,n,s),e.fillStyle="rgba(0,0,0,0.3)",e.font="bold 16px Arial",e.textAlign="center",e.fillText(t,256,480)},z=(e,t,l,a,o,i,r)=>{e.fillStyle="#ffffff",e.fillRect(0,0,512,512),l.forEach((t,l)=>{W(e,t,a,o,i,l,r)}),X(e,t,a,o,i,r),e.fillStyle="rgba(0,0,0,0.5)",e.font="bold 14px Arial",e.textAlign="center",e.fillText(t,256,480)},D=(e,t,l,a,o,i,r,n,s)=>{let c=100+150*i+100*Math.random(),f=150+200*Math.random(),h=60+80*Math.random();switch(e.fillStyle=l,e.strokeStyle=a,e.lineWidth=r?2:4,t){case"house":E(e,c,f,h,l,a,o,r,n);break;case"car":B(e,c,f,h,l,a,o,r,n);break;case"tree":U(e,c,f,h,l,a,o,r,n);break;case"person":G(e,c,f,h,l,a,o,r,n);break;case"animal":A(e,c,f,h,l,a,o,r,n);break;case"nature":L(e,c,f,h,l,a,o,r,n);break;case"food":O(e,c,f,h,l,a,o,r,n);break;default:_(e,c,f,h,l,a,o,s)}},E=(e,t,l,a,o,i,r,n,s)=>{e.fillStyle=o,e.fillRect(t-a/2,l-a/3,a,.6*a),e.fillStyle=i,e.beginPath(),e.moveTo(t-a/2,l-a/3),e.lineTo(t,l-a/2),e.lineTo(t+a/2,l-a/3),e.closePath(),e.fill(),e.fillStyle=r,e.fillRect(t-a/8,l-a/6,a/4,a/3),e.fillStyle="#87ceeb",e.fillRect(t-a/3,l-a/4,a/6,a/6),e.fillRect(t+a/6,l-a/4,a/6,a/6),n&&(e.fillStyle="rgba(0,0,0,0.2)",e.fillRect(t-a/2,l+a/6,a,4))},B=(e,t,l,a,o,i,r,n,s)=>{e.fillStyle=o,e.fillRect(t-a/2,l-a/4,a,a/2),e.fillStyle="#2c2c54",e.beginPath(),e.arc(t-a/3,l+a/4,a/8,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t+a/3,l+a/4,a/8,0,2*Math.PI),e.fill(),e.fillStyle="#87ceeb",e.fillRect(t-a/3,l-a/6,a/3,a/6)},U=(e,t,l,a,o,i,r,n,s)=>{e.fillStyle="#8b4513",e.fillRect(t-a/12,l-a/6,a/6,a/3),e.fillStyle=o,e.beginPath(),e.arc(t,l-a/3,a/3,0,2*Math.PI),e.fill()},G=(e,t,l,a,o,i,r,n,s)=>{e.fillStyle=o,e.beginPath(),e.arc(t,l-a/3,a/6,0,2*Math.PI),e.fill(),e.fillStyle=i,e.fillRect(t-a/8,l-a/6,a/4,a/3),e.fillRect(t-a/4,l-a/8,a/6,a/8),e.fillRect(t+a/12,l-a/8,a/6,a/8),e.fillRect(t-a/12,l+a/8,a/12,a/4),e.fillRect(t,l+a/8,a/12,a/4)},A=(e,t,l,a,o,i,r,n,s)=>{e.fillStyle=o,e.beginPath(),e.ellipse(t,l,a/3,a/4,0,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t,l-a/4,a/6,0,2*Math.PI),e.fill(),e.fillStyle=i,e.beginPath(),e.arc(t-a/8,l-a/3,a/12,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t+a/8,l-a/3,a/12,0,2*Math.PI),e.fill()},L=(e,t,l,a,o,i,r,n,s)=>{e.fillStyle=o,e.beginPath(),e.moveTo(t-a/2,l+a/4),e.lineTo(t,l-a/4),e.lineTo(t+a/2,l+a/4),e.closePath(),e.fill(),e.fillStyle=r,e.beginPath(),e.arc(t+a/3,l-a/3,a/8,0,2*Math.PI),e.fill()},O=(e,t,l,a,o,i,r,n,s)=>{e.fillStyle=o,e.beginPath(),e.arc(t,l,a/4,0,2*Math.PI),e.fill(),e.fillStyle=i,e.fillRect(t-a/16,l-a/4,a/8,a/8)},_=(e,t,l,a,o,i,r,n)=>{e.fillStyle=o;for(let o=0;o<5;o++){let i=o*Math.PI*2/5,r=t+Math.cos(i)*a/3,n=l+Math.sin(i)*a/3;e.beginPath(),e.arc(r,n,a/8,0,2*Math.PI),e.fill()}},W=(e,t,l,a,o,i,r)=>{let n=100+150*i+100*Math.random(),s=150+200*Math.random(),c=40+60*Math.random();switch(e.fillStyle=l,e.strokeStyle=a,e.lineWidth=3,t){case"house":e.fillRect(n-c/2,s-c/3,c,.6*c),e.beginPath(),e.moveTo(n-c/2,s-c/3),e.lineTo(n,s-c/2),e.lineTo(n+c/2,s-c/3),e.closePath(),e.fill();break;case"car":e.fillRect(n-c/2,s-c/4,c,c/2);break;default:e.beginPath(),e.arc(n,s,c/2,0,2*Math.PI),e.fill()}},J=(e,t,l,a,o,i,r,n)=>{if(i){e.fillStyle="rgba(255,255,255,0.1)";for(let t=0;t<20;t++)e.fillRect(512*Math.random(),512*Math.random(),2,2)}else if(r){e.fillStyle=o;for(let t=0;t<10;t++)e.beginPath(),e.arc(512*Math.random(),512*Math.random(),3,0,2*Math.PI),e.fill()}},X=(e,t,l,a,o,i)=>{e.strokeStyle=o,e.lineWidth=2;for(let t=0;t<5;t++)e.beginPath(),e.moveTo(512*Math.random(),512*Math.random()),e.lineTo(512*Math.random(),512*Math.random()),e.stroke()},Y=async()=>{if(!c.trim()){console.log("No prompt provided");return}console.log("\uD83D\uDE80 Starting vector generation for prompt:",c);try{let e=await R(c,"vector");console.log("✅ Generated image successfully:",e.substring(0,50)+"..."),u(e),g(t=>[e,...t].slice(0,20))}catch(e){console.error("❌ Error generating vector:",e),alert("Error generating image: "+e.message)}},H=async()=>{if(!c.trim()){console.log("No prompt provided");return}console.log("\uD83D\uDE80 Starting PNG generation for prompt:",c);try{let e=await R(c,"png");console.log("✅ Generated image successfully:",e.substring(0,50)+"..."),u(e),g(t=>[e,...t].slice(0,20))}catch(e){console.error("❌ Error generating PNG:",e),alert("Error generating image: "+e.message)}};return(0,a.jsx)("main",{className:"min-h-screen w-full bg-black flex items-start justify-center overflow-auto",children:(0,a.jsxs)("div",{style:{width:l,height:n,transform:"scale(".concat(e,")"),transformOrigin:"top center"},onMouseMove:e=>{if(!w)return;let{key:t,dx:l,dy:a}=w,o=(e.clientX-l)/k,i=(e.clientY-a)/P,r=v[t],n={...v,[t]:{...r,l:Math.max(0,r.l+o),t:Math.max(0,r.t+i)}};p({key:t,dx:e.clientX,dy:e.clientY}),function(e){y(e);try{localStorage.setItem("ui_rects",JSON.stringify(e))}catch(e){}}(n)},onMouseUp:()=>p(null),className:"jsx-e6ab7573aa30f4c5 relative overflow-hidden",children:[(0,a.jsx)(i(),{id:"e6ab7573aa30f4c5",children:".scrollbox{scrollbar-width:thin;scrollbar-color:#000080#0000}.scrollbox::-webkit-scrollbar{width:12px;height:12px;background:transparent}.scrollbox::-webkit-scrollbar-track{background:transparent}.scrollbox::-webkit-scrollbar-thumb{background:#000080;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;border:1px solid rgba(255,255,255,.1)}.scrollbox::-webkit-scrollbar-thumb:hover{background:#00a}"}),(0,a.jsx)("img",{ref:x,src:"/static/stage1/stage-1-bg.jpg",alt:"",onLoad:e=>{let t=e.currentTarget,l=t.naturalWidth||1280,a=t.naturalHeight||720;o(l),s(a),S(l)},className:"jsx-e6ab7573aa30f4c5 absolute inset-0 w-full h-full object-cover z-0 pointer-events-none"}),(0,a.jsx)("img",{src:"/static/stage1/stage-1-UI.png",alt:"",className:"jsx-e6ab7573aa30f4c5 absolute inset-0 w-full h-full object-contain z-10 pointer-events-none"}),(0,a.jsx)("div",{style:{...M(v.prompt),borderRadius:16},onMouseDown:e=>j(e,"prompt"),className:"jsx-e6ab7573aa30f4c5 "+"absolute z-20 overflow-auto scrollbox ".concat(b?"outline outline-2 outline-yellow-400":""),children:(0,a.jsx)("textarea",{style:{fontSize:"13px",color:"#000080",padding:"6px 10px",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere",boxSizing:"border-box"},value:c,onChange:e=>f(e.target.value),wrap:"soft",className:"jsx-e6ab7573aa30f4c5 w-full h-full bg-transparent outline-none resize-none border-0 scrollbox"})}),(0,a.jsx)("button",{style:{...M(v.vecBtn),background:"transparent",cursor:"pointer"},onMouseDown:e=>j(e,"vecBtn"),onClick:Y,"aria-label":"Gerar Vetor",className:"jsx-e6ab7573aa30f4c5 "+"absolute z-20 ".concat(b?"outline outline-2 outline-yellow-400":"")}),(0,a.jsx)("button",{style:{...M(v.pngBtn),background:"transparent",cursor:"pointer"},onMouseDown:e=>j(e,"pngBtn"),onClick:H,"aria-label":"Gerar PNG",className:"jsx-e6ab7573aa30f4c5 "+"absolute z-20 ".concat(b?"outline outline-2 outline-yellow-400":"")}),(0,a.jsx)("div",{style:{...M(v.hist)},onMouseDown:e=>j(e,"hist"),className:"jsx-e6ab7573aa30f4c5 "+"absolute z-20 overflow-auto scrollbox ".concat(b?"outline outline-2 outline-yellow-400":""),children:(0,a.jsx)("div",{className:"jsx-e6ab7573aa30f4c5 grid grid-cols-1 gap-2",children:h.map((e,t)=>(0,a.jsx)("img",{src:e,alt:"hist-"+t,onClick:()=>u(e),className:"jsx-e6ab7573aa30f4c5 w-full h-24 object-cover rounded cursor-pointer"},t))})}),(0,a.jsx)("button",{onClick:()=>m(e=>!e),className:"jsx-e6ab7573aa30f4c5 absolute z-30 bottom-2 right-2 bg-white/70 text-black px-3 py-1 rounded",children:b?"Lock":"Calibrate"}),(0,a.jsx)("button",{onClick:()=>window.location.href="/advanced",className:"jsx-e6ab7573aa30f4c5 absolute z-30 bottom-2 left-2 bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors",children:"Advanced Studio"}),(0,a.jsx)("button",{onClick:()=>window.location.href="/stage2",className:"jsx-e6ab7573aa30f4c5 absolute z-30 bottom-2 left-40 bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700 transition-colors",children:"Stage 2"})]})})}}},function(e){e.O(0,[59,971,23,744],function(){return e(e.s=6856)}),_N_E=e.O()}]);